@using TechnologySite.Entities
@model List<Product>

@{
	ViewBag.Title = ViewBag.CategoryName;
	Layout = null;  /* Layout null ise tüm HTML’i burada render ediyoruz */
}

<!DOCTYPE html>
<html lang="en">

@await Component.InvokeAsync("_UserLayoutDefaultHeadComponentPartial")

<body>

	<!-- Navigation -->
	@await Component.InvokeAsync("_UserLayoutDefaultNavbarComponentPartial")

	<!-- Mega Menu -->
	@await Component.InvokeAsync("MegaMenu")

	<!-- Ürün Listesi -->
	<div class="container-fluid mt-4">
		<h2>@ViewBag.CategoryName</h2>

		<div style="display: flex; flex-wrap: wrap; gap: 15px;">
			@foreach (var item in Model)
			{
				<div style="border:1px solid #ddd; padding:10px; width:200px;">
					<img src="@item.Image" style="width:100%; height:150px; object-fit:cover;" />
					<h4>@item.ProductName</h4>
					<p>@item.Price ₺</p>
				</div>
			}
		</div>
	</div>

	<!-- SCRIPT: MegaMenu Hover / Kapat -->
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const btn = document.getElementById("allProductsBtn");
			const mega = document.getElementById("megaMenu");

			if (btn && mega) {
				// Tüm Ürünler üzerine geldiğinde aç
				btn.addEventListener("mouseenter", () => {
					mega.classList.add("active");
				});

				// Menüden mouse çıkınca kapat
				mega.addEventListener("mouseleave", () => {
					mega.classList.remove("active");
				});
			}
		});
	</script>

</body>
</html>

<style>
	body {
		background: linear-gradient(135deg, #ffe0b2, #ffd180, #e1f5fe);
	}
</style>
